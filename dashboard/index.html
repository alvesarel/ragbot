<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinic AI Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <span class="logo-icon">üè•</span>
                <span class="logo-text">Clinic AI</span>
            </div>

            <nav class="nav">
                <button class="nav-item active" data-view="overview">
                    <span class="nav-icon">üìä</span>
                    <span>Overview</span>
                </button>
                <button class="nav-item" data-view="sofia">
                    <span class="nav-icon">üí¨</span>
                    <span>Sofia</span>
                    <span class="status-dot" id="nav-status-sofia"></span>
                </button>
                <button class="nav-item" data-view="diana">
                    <span class="nav-icon">üíä</span>
                    <span>Diana</span>
                    <span class="status-dot" id="nav-status-diana"></span>
                </button>
                <button class="nav-item" data-view="yara">
                    <span class="nav-icon">üìà</span>
                    <span>Yara</span>
                    <span class="status-dot" id="nav-status-yara"></span>
                </button>
                <button class="nav-item" data-view="executions">
                    <span class="nav-icon">üìã</span>
                    <span>Executions</span>
                </button>
                <button class="nav-item" data-view="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="connection-badge" id="connection-badge">
                    <span class="connection-dot"></span>
                    <span>Checking...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <!-- Overview View -->
            <section id="view-overview" class="view active">
                <header class="view-header">
                    <h1>Dashboard Overview</h1>
                    <button class="btn btn-primary" id="btn-refresh">
                        <span class="btn-icon">‚Üª</span> Refresh
                    </button>
                </header>

                <div class="agents-grid">
                    <!-- Sofia Card -->
                    <div class="agent-card" data-agent="sofia">
                        <div class="agent-header">
                            <div class="agent-info">
                                <span class="agent-avatar">üë©‚Äçüíº</span>
                                <div>
                                    <h3>Sofia</h3>
                                    <span class="agent-role">Lead Qualification</span>
                                </div>
                            </div>
                            <span class="agent-status" id="status-sofia">--</span>
                        </div>
                        <div class="agent-channel">
                            <span class="channel-icon">üì±</span> WhatsApp
                        </div>
                        <div class="agent-stats">
                            <div class="stat">
                                <span class="stat-value" id="sofia-executions">--</span>
                                <span class="stat-label">Executions (24h)</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value" id="sofia-success">--</span>
                                <span class="stat-label">Success Rate</span>
                            </div>
                        </div>
                        <button class="btn btn-secondary btn-block" onclick="viewAgent('sofia')">View Details</button>
                    </div>

                    <!-- Diana Card -->
                    <div class="agent-card" data-agent="diana">
                        <div class="agent-header">
                            <div class="agent-info">
                                <span class="agent-avatar">üë©‚Äç‚öïÔ∏è</span>
                                <div>
                                    <h3>Diana</h3>
                                    <span class="agent-role">Patient Check-ins</span>
                                </div>
                            </div>
                            <span class="agent-status" id="status-diana">--</span>
                        </div>
                        <div class="agent-channel">
                            <span class="channel-icon">üì±</span> WhatsApp
                        </div>
                        <div class="agent-stats">
                            <div class="stat">
                                <span class="stat-value" id="diana-executions">--</span>
                                <span class="stat-label">Executions (24h)</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value" id="diana-success">--</span>
                                <span class="stat-label">Success Rate</span>
                            </div>
                        </div>
                        <button class="btn btn-secondary btn-block" onclick="viewAgent('diana')">View Details</button>
                    </div>

                    <!-- Yara Card -->
                    <div class="agent-card" data-agent="yara">
                        <div class="agent-header">
                            <div class="agent-info">
                                <span class="agent-avatar">üë©‚Äçüíª</span>
                                <div>
                                    <h3>Yara</h3>
                                    <span class="agent-role">Executive Assistant</span>
                                </div>
                            </div>
                            <span class="agent-status" id="status-yara">--</span>
                        </div>
                        <div class="agent-channel">
                            <span class="channel-icon">‚úàÔ∏è</span> Telegram
                        </div>
                        <div class="agent-stats">
                            <div class="stat">
                                <span class="stat-value" id="yara-executions">--</span>
                                <span class="stat-label">Executions (24h)</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value" id="yara-success">--</span>
                                <span class="stat-label">Success Rate</span>
                            </div>
                        </div>
                        <button class="btn btn-secondary btn-block" onclick="viewAgent('yara')">View Details</button>
                    </div>
                </div>

                <!-- Recent Executions -->
                <div class="section">
                    <div class="section-header">
                        <h2>Recent Executions</h2>
                        <button class="btn btn-text" onclick="switchView('executions')">View All ‚Üí</button>
                    </div>
                    <div class="table-container">
                        <table class="table" id="recent-executions-table">
                            <thead>
                                <tr>
                                    <th>Workflow</th>
                                    <th>Status</th>
                                    <th>Started</th>
                                    <th>Duration</th>
                                </tr>
                            </thead>
                            <tbody id="recent-executions">
                                <tr><td colspan="4" class="loading">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Sofia View -->
            <section id="view-sofia" class="view">
                <header class="view-header">
                    <div class="view-title">
                        <button class="btn-back" onclick="switchView('overview')">‚Üê</button>
                        <span class="agent-avatar">üë©‚Äçüíº</span>
                        <div>
                            <h1>Sofia</h1>
                            <span class="subtitle">Lead Qualification Agent ‚Ä¢ WhatsApp</span>
                        </div>
                    </div>
                    <span class="agent-status large" id="status-sofia-detail">--</span>
                </header>

                <div class="agent-detail-grid">
                    <div class="detail-card">
                        <h3>Workflow Info</h3>
                        <div class="info-list">
                            <div class="info-row">
                                <span class="info-label">Workflow ID</span>
                                <code class="info-value" id="sofia-workflow-id">--</code>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Last Updated</span>
                                <span class="info-value" id="sofia-updated">--</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Trigger Count</span>
                                <span class="info-value" id="sofia-triggers">--</span>
                            </div>
                        </div>
                    </div>
                    <div class="detail-card">
                        <h3>Execution Stats (24h)</h3>
                        <div class="stats-row">
                            <div class="stat-box">
                                <span class="stat-number" id="sofia-total-24h">--</span>
                                <span class="stat-text">Total</span>
                            </div>
                            <div class="stat-box success">
                                <span class="stat-number" id="sofia-success-24h">--</span>
                                <span class="stat-text">Success</span>
                            </div>
                            <div class="stat-box error">
                                <span class="stat-number" id="sofia-error-24h">--</span>
                                <span class="stat-text">Errors</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Recent Executions</h2>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Execution ID</th>
                                    <th>Status</th>
                                    <th>Started</th>
                                    <th>Duration</th>
                                    <th>Mode</th>
                                </tr>
                            </thead>
                            <tbody id="sofia-executions-list">
                                <tr><td colspan="5" class="loading">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Diana View -->
            <section id="view-diana" class="view">
                <header class="view-header">
                    <div class="view-title">
                        <button class="btn-back" onclick="switchView('overview')">‚Üê</button>
                        <span class="agent-avatar">üë©‚Äç‚öïÔ∏è</span>
                        <div>
                            <h1>Diana</h1>
                            <span class="subtitle">Patient Check-in Agent ‚Ä¢ WhatsApp</span>
                        </div>
                    </div>
                    <span class="agent-status large" id="status-diana-detail">--</span>
                </header>

                <div class="agent-detail-grid">
                    <div class="detail-card">
                        <h3>Workflow Info</h3>
                        <div class="info-list">
                            <div class="info-row">
                                <span class="info-label">Workflow ID</span>
                                <code class="info-value" id="diana-workflow-id">--</code>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Last Updated</span>
                                <span class="info-value" id="diana-updated">--</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Schedule</span>
                                <span class="info-value">Saturdays 11 AM</span>
                            </div>
                        </div>
                    </div>
                    <div class="detail-card">
                        <h3>Execution Stats (24h)</h3>
                        <div class="stats-row">
                            <div class="stat-box">
                                <span class="stat-number" id="diana-total-24h">--</span>
                                <span class="stat-text">Total</span>
                            </div>
                            <div class="stat-box success">
                                <span class="stat-number" id="diana-success-24h">--</span>
                                <span class="stat-text">Success</span>
                            </div>
                            <div class="stat-box error">
                                <span class="stat-number" id="diana-error-24h">--</span>
                                <span class="stat-text">Errors</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Recent Executions</h2>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Execution ID</th>
                                    <th>Status</th>
                                    <th>Started</th>
                                    <th>Duration</th>
                                    <th>Mode</th>
                                </tr>
                            </thead>
                            <tbody id="diana-executions-list">
                                <tr><td colspan="5" class="loading">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Yara View -->
            <section id="view-yara" class="view">
                <header class="view-header">
                    <div class="view-title">
                        <button class="btn-back" onclick="switchView('overview')">‚Üê</button>
                        <span class="agent-avatar">üë©‚Äçüíª</span>
                        <div>
                            <h1>Yara</h1>
                            <span class="subtitle">Executive Assistant ‚Ä¢ Telegram</span>
                        </div>
                    </div>
                    <span class="agent-status large" id="status-yara-detail">--</span>
                </header>

                <div class="agent-detail-grid">
                    <div class="detail-card">
                        <h3>Workflow Info</h3>
                        <div class="info-list">
                            <div class="info-row">
                                <span class="info-label">Workflow ID</span>
                                <code class="info-value" id="yara-workflow-id">--</code>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Last Updated</span>
                                <span class="info-value" id="yara-updated">--</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Trigger Count</span>
                                <span class="info-value" id="yara-triggers">--</span>
                            </div>
                        </div>
                    </div>
                    <div class="detail-card">
                        <h3>Execution Stats (24h)</h3>
                        <div class="stats-row">
                            <div class="stat-box">
                                <span class="stat-number" id="yara-total-24h">--</span>
                                <span class="stat-text">Total</span>
                            </div>
                            <div class="stat-box success">
                                <span class="stat-number" id="yara-success-24h">--</span>
                                <span class="stat-text">Success</span>
                            </div>
                            <div class="stat-box error">
                                <span class="stat-number" id="yara-error-24h">--</span>
                                <span class="stat-text">Errors</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Recent Executions</h2>
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Execution ID</th>
                                    <th>Status</th>
                                    <th>Started</th>
                                    <th>Duration</th>
                                    <th>Mode</th>
                                </tr>
                            </thead>
                            <tbody id="yara-executions-list">
                                <tr><td colspan="5" class="loading">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Executions View -->
            <section id="view-executions" class="view">
                <header class="view-header">
                    <h1>All Executions</h1>
                    <div class="filter-group">
                        <select id="filter-workflow" class="select">
                            <option value="">All Workflows</option>
                        </select>
                        <select id="filter-status" class="select">
                            <option value="">All Status</option>
                            <option value="success">Success</option>
                            <option value="error">Error</option>
                            <option value="running">Running</option>
                        </select>
                    </div>
                </header>

                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Workflow</th>
                                <th>Execution ID</th>
                                <th>Status</th>
                                <th>Started</th>
                                <th>Duration</th>
                                <th>Mode</th>
                            </tr>
                        </thead>
                        <tbody id="all-executions-list">
                            <tr><td colspan="6" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Settings View -->
            <section id="view-settings" class="view">
                <header class="view-header">
                    <h1>Settings</h1>
                </header>

                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>n8n Connection</h3>
                        <form id="settings-form">
                            <div class="form-group">
                                <label>n8n URL</label>
                                <input type="url" id="input-n8n-url" placeholder="https://your-n8n.com">
                            </div>
                            <div class="form-group">
                                <label>API Key</label>
                                <input type="password" id="input-n8n-key" placeholder="n8n_api_...">
                            </div>
                            <button type="submit" class="btn btn-primary">Save & Connect</button>
                        </form>
                        <div id="settings-status" class="settings-status"></div>
                    </div>

                    <div class="settings-card">
                        <h3>Workflow IDs</h3>
                        <div class="info-list">
                            <div class="info-row">
                                <span class="info-label">Sofia</span>
                                <code class="info-value" id="settings-sofia-id">--</code>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Diana</span>
                                <code class="info-value" id="settings-diana-id">--</code>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Yara</span>
                                <code class="info-value" id="settings-yara-id">--</code>
                            </div>
                        </div>
                        <p class="help-text">Workflow IDs are configured in config.js</p>
                    </div>

                    <div class="settings-card">
                        <h3>About</h3>
                        <div class="about-agents">
                            <div class="about-agent">
                                <strong>Sofia</strong> - Lead qualification via WhatsApp. Handles Meta Ads inquiries.
                            </div>
                            <div class="about-agent">
                                <strong>Diana</strong> - Patient check-ins for Tirzepatide treatment. Weekly follow-ups.
                            </div>
                            <div class="about-agent">
                                <strong>Yara</strong> - Executive assistant via Telegram. Analytics and management.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
